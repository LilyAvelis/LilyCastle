# Комментарии разработчика

> Режим: "пришла на пожар" — фиксируем, что происходило и почему всё горело.

## Что было до моего прихода

1. **Создание Next-проекта:** предыдущие агенты (Claude и Grok) несколько раз запускали `create-next-app`, но проект то назывался `BugManager-Next`, то `bug-manager-next`. Из-за путаницы с регистром и путями npm искал `package.json` в неправильных папках, а dev-сервер вообще не стартовал.
2. **Сломанный UI:** первая версия страницы представляла собой набор статических плейсхолдеров (буквальный копипаст названий жуков по столбикам), без реальных данных и комнат. Пользователь видел ровные колонки одинаковых насекомых.
3. **API-хаос:** `/api/bugs` в некоторых версиях пытался запускать Python-скрипты через относительные пути (`../../bug-manager.py`). Скрипта по этому пути не существовало, поэтому вызовы падали. В другие моменты API вообще не возвращал JSON, а UI тихо глотал ошибку.
4. **Файлы Tailwind:** `globals.css` был пуст/отсутствовал, из-за чего Next ругался и переставал собираться. Плюс использовались Node-модули (`fs`, `path`) прямо в клиентском компоненте, что ломало билд.

## Что сделано сейчас

- Навели порядок в структуре `BugManager-Next`, восстановили `globals.css`, удалили Node-зависимости из клиентского кода.
- API полностью переписан на Node.js-обход файловой системы (без Python), с аккуратным чтением `.bug` файлов и красивыми названиями комнат.
- UI получил реальный источник данных, адаптивные карточки, статусы загрузки/ошибок и рабочую кнопку перемешивания.
- Добавлена документация (`@Out.md`, обновлён `@Home.md`) и обозначена история произошедшего (этот файл).

## Почему "всё сгорело"

- **Пути и регистр:** Windows не прощает путаницу `BugManager-Next` vs `bug-manager-next` — команды npm падали, сервер не видел файлов.
- **Отсутствие данных:** UI никогда не подключался к реальным `.bug` файлам, поэтому вся логика была фиктивной.
- **ExecSync по неверному пути:** попытки дергать Python без `cwd` и с неверными относительными путями приводили к ENOENT.
- **Несогласованность инструментов:** Tailwind/Next требовали базовых файлов (`globals.css`), но их удалили, что остановило компиляцию.

Теперь система стабилизирована, но roadmap в `@Home.md` описывает, как превратить её в настоящий менеджер (таргетинг жуков, массовые обновления и drag&drop).
