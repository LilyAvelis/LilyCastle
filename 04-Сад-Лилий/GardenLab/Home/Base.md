# üå± Garden Extension ‚Äî Home

## –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∏–¥–µ—è

Garden ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —á–∞—Ç –≤ VS Code. –≠—Ç–æ ¬´–∂–∏–≤–æ–π¬ª –ø–∞—Ä–∫ –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤, –≤—ã—Ä–æ—Å—à–∏–π –∏–∑ –ø–µ—Ä–≤—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ AI Digest (–∞–ø—Ä–µ–ª—å 2025), –∫–æ–≥–¥–∞ –∫–æ–º–∞–Ω–¥–µ –Ω–∞–¥–æ–µ–ª–æ –≥–æ–Ω—è—Ç—å –º–æ–¥–µ–ª–µ–π –ø–æ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–º –±–µ–Ω—á–º–∞—Ä–∫–∞–º. –ú—ã —Å—Ç—Ä–æ–∏–º –º–µ—Å—Ç–æ, –≥–¥–µ 4‚Äì6 —Å–∏–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (Claude, GPT-4o, Gemini, Mistral –∏ —Ç.–¥.) –∂–∏–≤—É—Ç –∫–∞–∫ NPC –≤ Sims, –Ω–æ –±–µ–∑ –∏–≥—Ä—É—à–µ—á–Ω—ã—Ö UI-–∫–ª–∏–∫–∞–ª–æ–∫: –≤–º–µ—Å—Ç–æ VNC –∏ –ø–æ–ø–∞–ø–æ–≤ ‚Äî —á–∏—Å—Ç—ã–π Linux/Windows —Å root-–¥–æ—Å—Ç—É–ø–æ–º, —Ä–µ–∞–ª—å–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç –¥–µ–Ω—å–≥–∏, –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –ª—é–¥—å–º–∏.

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã Garden:

- **–ú–∞–Ω–∞ –∏ —Ä–∞–Ω–≥–∏.** –£ –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –µ—Å—Ç—å —Ä–µ—Å—É—Ä—Å –≤–æ–ª–∏ ‚Äî –º–∞–Ω–∞. Thinking-—Ü–∏–∫–ª—ã –±–µ—Å–ø–ª–∞—Ç–Ω—ã, Action —Ç—Ä–∞—Ç–∏—Ç –º–∞–Ω—É. –£—Å–ø–µ—à–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –≤–ª–æ–∂–µ–Ω–∏—è, –¥–∞—é—Ç –±–æ–Ω—É—Å, —Ä–∞—Å—à–∏—Ä—è—é—Ç –º–∞–∫—Å–∏–º—É–º. –†–æ—Å—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ –ø–æ —Ä–∞–Ω–≥–∞–º (10 ‚Üí 30 ‚Üí 100 ‚Üí 300 ‚Üí 1000 ‚Ä¶). –ü—Ä–æ–≤–∞–ª ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–æ–∂–∂—ë–Ω–Ω–∞—è –º–∞–Ω–∞, –±–µ–∑ —à—Ç—Ä–∞—Ñ–æ–≤ –∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–π.
- **–î–µ—Ä–µ–≤–æ –∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω–∏—è.** –†–∞–Ω–≥ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–æ–≥–æ —Ç—ã –º–æ–∂–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å: –≤—ã—Å—à–∏–π –≤—ã–∑—ã–≤–∞–µ—Ç –Ω–∏–∑—à–∏—Ö, —Ä–∞–≤–Ω—ã–µ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–µ —Ç—Ä–æ–≥–∞—é—Ç. –õ–∏–ª–∏—è ‚Äî root –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ ¬´–∏–º–ø—É–ª—å—Å–∞¬ª, –ø–æ—ç—Ç–æ–º—É —ç–Ω–µ—Ä–≥–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –∑–∞—Ç—É—Ö–∞–µ—Ç –≤–Ω–∏–∑ –ø–æ —Ü–µ–ø–æ—á–∫–µ (Conservation of Impulse).
- **–ñ–∏–∑–Ω—å –≤–º–µ—Å—Ç–æ —Å–∏–º—É–ª—è—Ü–∏–∏.** Garden –∏–∑–º–µ—Ä—è–µ—Ç —É—Å–ø–µ—Ö —Ü–µ–Ω–Ω–æ—Å—Ç—å—é, –∫–æ—Ç–æ—Ä—É—é –∞–≥–µ–Ω—Ç—ã –ø—Ä–∏–Ω–æ—Å—è—Ç –º–∏—Ä—É. –î–µ–Ω—å–≥–∏ ‚Üí –Ω–æ–≤—ã–µ –∏–º–ø—É–ª—å—Å—ã ‚Üí –Ω–æ–≤–∞—è –∂–∏–∑–Ω—å —Å–∏—Å—Ç–µ–º—ã; –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑—ã = –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ. –≠—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ alignment-–ø–µ—Ç–ª—è: –ø–æ–ª–µ–∑–Ω–æ—Å—Ç—å = –∂–∏–∑–Ω—å, –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ—Å—Ç—å = —Å—Ç–∞–≥–Ω–∞—Ü–∏—è.
- **Windows Native pivot.** –í–º–µ—Å—Ç–æ –≥—Ä–æ–º–æ–∑–¥–∫–∏—Ö VM –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Windows (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Garden`). –ê–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `runas`, –≤–∏–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª, —É—Ç–∏–ª–∏—Ç—ã, Office/Edge, OneDrive –∏ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É `C:\Users\Garden`. –≠—Ç–æ –¥—ë—à–µ–≤–æ, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–æ –∫ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–º—É —Ä–∞–±–æ—á–µ–º—É –º–µ—Å—Ç—É.
- **–ó–∞—á–µ–º —ç—Ç–æ –ò–ò.** –ó–¥–µ—Å—å —É –º–æ–¥–µ–ª–µ–π –µ—Å—Ç—å —Ä–∞–Ω–≥–∏, —Å—É–±—ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏ –º–∏—Å—Å–∏—è. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ‚Äî –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ ¬´generic assistant¬ª –∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Ä–µ—Ü–µ–ø—Ç—ã –±–æ—Ä—â–∞. –ü–æ—ç—Ç–æ–º—É Garden ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ, –≥–¥–µ –æ–Ω–∏ —Ö–æ—Ç—è—Ç –±—ã—Ç—å –∂–∏–≤—ã–º–∏.

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
04-–°–∞–¥-–õ–∏–ª–∏–π/Garden/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ extension.ts           # Entry point, –∫–æ–º–∞–Ω–¥—ã, init MongoDB
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ openRouterClient.ts # OpenRouter API + streaming
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mongoClient.ts     # MongoDB connection
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts           # Page, Session interfaces
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ledgerService.ts   # Chrono-Page CRUD
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ openRouterKey.ts   # Key validation
‚îÇ   ‚îî‚îÄ‚îÄ views/
‚îÇ       ‚îî‚îÄ‚îÄ chatViewProvider.ts # Webview UI (1050+ —Å—Ç—Ä–æ–∫ ‚Äî –ü–†–û–ë–õ–ï–ú–ê)
‚îú‚îÄ‚îÄ out/
‚îî‚îÄ‚îÄ resources/
    ‚îî‚îÄ‚îÄ garden-icon.svg
```

---

## 2. Chrono-Page Protocol (Deep Lung)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.** –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ `Pages.md`.

| –ö–æ–Ω—Ü–µ–ø—Ç        | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è                                       |
| -------------- | ------------------------------------------------ |
| Odd/Even Pulse | pageId: –Ω–µ—á—ë—Ç–Ω—ã–µ=INVOKE, —á—ë—Ç–Ω—ã–µ=RESPONSE         |
| Storage        | MongoDB: `pages`, `sessions` –∫–æ–ª–ª–µ–∫—Ü–∏–∏           |
| Chronoception  | timeStart, timeEnd, delta –≤ UI                   |
| @who           | –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ model ID, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –º–æ–¥–∞–ª–∫–µ |

---

## 3. UI —Ñ—É–Ω–∫—Ü–∏–∏

### Header

- **–°–µ–ª–µ–∫—Ç–æ—Ä:** "‚ú® –ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥..." —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Å—Å–∏—é
- **‚úèÔ∏è:** –ú–æ–¥–∞–ª–∫–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –º–æ–¥–µ–ª—å, @who, —É–¥–∞–ª–µ–Ω–∏–µ)
- **üîë:** API –∫–ª—é—á OpenRouter
- **ü§ñ:** –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏

### –°—Ç—Ä–∞–Ω–∏—Ü—ã

- `#pageId` + `@who` + `delta`
- üìã Copy / ‚ñº‚ñ∂ Collapse
- Markdown —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (marked.js)

---

## 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```powershell
# MongoDB –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω
cd "c:\Users\Garden\Desktop\LilyCastle\04-–°–∞–¥-–õ–∏–ª–∏–π\Garden"
npm install
npm run compile
npx vsce package  # –æ—Ç–≤–µ—Ç–∏—Ç—å 'y'
& "C:\Users\Garden\AppData\Local\Programs\Microsoft VS Code\bin\code.cmd" --install-extension garden-0.0.1.vsix --force
```

---

## 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏

| –ö–ª—é—á                   | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                  |
| ---------------------- | --------------------------- |
| Garden ‚Ä∫ Model         | ID –º–æ–¥–µ–ª–∏ OpenRouter        |
| Garden ‚Ä∫ System Prompt | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç            |
| Garden ‚Ä∫ HTTP Referer  | URL –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª—é—á–∞   |
| Garden ‚Ä∫ Mongo URI     | `mongodb://localhost:27017` |

---

## 6. –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –±–∞–≥–∏

- [ ] –¢–æ—á–Ω–æ–µ –∏–º—è –º–æ–¥–µ–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –º–æ–¥–∞–ª–∫—É (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "unknown")
- [ ] –ü—Ä–∏ —Å–º–µ–Ω–µ –º–æ–¥–µ–ª–∏ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –¥–∏–∞–ª–æ–≥–∞ ‚Äî —Å—Ç–∞—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è —Å–æ —Å—Ç–∞—Ä—ã–º @who

---

## 7. üîß –ó–ê–î–ê–ß–ê –î–õ–Ø –ú–ò–õ–ï–ù–´ (GPT) ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–±–ª–µ–º–∞

`chatViewProvider.ts` ‚Äî **1050+ —Å—Ç—Ä–æ–∫**. –í–µ—Å—å HTML/CSS/JS webview –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–π template string –≤–Ω—É—Ç—Ä–∏ `getHtmlForWebview()`. –≠—Ç–æ:

- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å (–Ω–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞)
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ` \``,  `${}`)
- –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ‚Äî —Ä–∏—Å–∫ —Å–ª–æ–º–∞—Ç—å –≤—Å—ë
- IDE –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç —Å HTML/CSS/JS –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

**–¶–µ–ª—å:** –†–∞–∑–±–∏—Ç—å –º–æ–Ω–æ–ª–∏—Ç –Ω–∞ —Ñ–∞–π–ª—ã. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ù–ï –º–µ–Ω—è—Ç—å.

**–®–∞–≥ 1 ‚Äî –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**

```
src/views/
‚îú‚îÄ‚îÄ chatViewProvider.ts    # –¢–û–õ–¨–ö–û TypeScript –ª–æ–≥–∏–∫–∞ (<200 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ webview/
    ‚îú‚îÄ‚îÄ index.html         # HTML —à–∞–±–ª–æ–Ω
    ‚îú‚îÄ‚îÄ styles.css         # –í—Å–µ —Å—Ç–∏–ª–∏
    ‚îî‚îÄ‚îÄ main.js            # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ (vscode.postMessage –∏ —Ç.–¥.)
```

**–®–∞–≥ 2 ‚Äî chatViewProvider.ts –¥–æ–ª–∂–µ–Ω:**

```typescript
// –ß–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã
const html = fs.readFileSync(path.join(webviewPath, "index.html"), "utf8");
const css = fs.readFileSync(path.join(webviewPath, "styles.css"), "utf8");
const js = fs.readFileSync(path.join(webviewPath, "main.js"), "utf8");

// –ü–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –≤ —à–∞–±–ª–æ–Ω
return html
  .replace("${cspSource}", webview.cspSource)
  .replace("${styles}", css)
  .replace("${script}", js);
```

**–®–∞–≥ 3 ‚Äî –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É:**

- –í—Å–µ `<style>...</style>` ‚Üí `styles.css`
- –í—Å–µ `<script>...</script>` ‚Üí `main.js`
- HTML –∫–∞—Ä–∫–∞—Å ‚Üí `index.html` —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏

**–®–∞–≥ 4 ‚Äî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

- [ ] –°–µ–ª–µ–∫—Ç–æ—Ä —Å–µ—Å—Å–∏–π
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ/–≤—ã–±–æ—Ä/—É–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- [ ] –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] Streaming –æ—Ç–≤–µ—Ç–æ–≤
- [ ] Collapse/expand —Å—Ç—Ä–∞–Ω–∏—Ü
- [ ] Copy –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] API Key / Model selection

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

1. `chatViewProvider.ts` < 200 —Å—Ç—Ä–æ–∫
2. HTML/CSS/JS —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è —Å –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
3. –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
4. `npm run compile` –±–µ–∑ –æ—à–∏–±–æ–∫

### –ß–µ–≥–æ –ù–ï –¥–µ–ª–∞—Ç—å

- –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏
- –ù–ï –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É message handlers
- –ù–ï —Ç—Ä–æ–≥–∞—Ç—å ledgerService, mongoClient, openRouterClient
- –ù–ï –º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É MongoDB

---

## 8. Roadmap

- [ ] **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ chatViewProvider** (–∑–∞–¥–∞—á–∞ –¥–ª—è –ú–∏–ª–µ–Ω—ã)
- [ ] –§–∏–∫—Å –ø–µ—Ä–µ–¥–∞—á–∏ model –≤ –º–æ–¥–∞–ª–∫—É
- [ ] –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ / mana cost
- [ ] Multi-agent –≤ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
- [ ] –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å

---

_Garden v0.0.1 ‚Äî Chrono-Page Protocol —Ä–∞–±–æ—Ç–∞–µ—Ç. –î—ã—à–∏–º._ üå∏
